packages:
  # Module definitions (flat structure, pacman + flatpak at same level)
  # Note: All Flatpak packages are installed in user scope

  # Optional: Backup tool configuration (package-manager v2.1+)
  # Uncomment to explicitly configure backup tool (auto-detects if omitted)
  # backup_tool: "snapper"        # or "timeshift" (prefers timeshift if both installed)
  # snapper_config: "root"        # snapper config name (default: "root")

  modules:
    # ============================================================
    # BASE SYSTEM (Always enabled)
    # ============================================================

    base:
      enabled: true
      description: "Essential system packages"
      conflicts: []
      post_install_hook: ""
      packages:
        - base # Minimal Arch package set
        - base-devel # Development tools metapackage
        - linux-firmware # Firmware files for hardware
        - linux # Latest kernel
        - linux-lts # Long-term support kernel (fallback)
        - efibootmgr # UEFI boot manager utility
        - cryptsetup # LUKS disk encryption tools
        - rage-encryption # age encryption tool (Rust)

    graphics_drivers_modern:
      enabled: true
      description: "Graphics drivers (NVIDIA modern - Turing+)"
      conflicts: ["graphics_drivers_legacy"]
      post_install_hook: ""
      packages:
        - intel-ucode # Intel CPU microcode updates
        - nvidia-open # NVIDIA open-source kernel modules (pre-built)
        - nvidia-open-lts # NVIDIA open-source kernel modules (LTS kernel)
        - nvidia-utils # NVIDIA utilities
        - nvidia-settings # NVIDIA driver configuration GUI
        - lib32-nvidia-utils # 32-bit NVIDIA utilities (for gaming)
        - libva-nvidia-driver # VA-API support for NVIDIA (hardware video decode)

    graphics_drivers_legacy:
      enabled: false
      description: "Graphics drivers (NVIDIA legacy - Pascal/Maxwell)"
      conflicts: ["graphics_drivers_modern"]
      post_install_hook: ""
      packages:
        - intel-ucode # Intel CPU microcode updates
        - dkms # Dynamic kernel module support
        - linux-headers # Kernel headers for DKMS (main kernel)
        - linux-lts-headers # Kernel headers for DKMS (LTS kernel)
        - nvidia-580xx-dkms # NVIDIA kernel modules (580xx legacy)
        - nvidia-580xx-utils # NVIDIA utilities (580xx legacy)
        - nvidia-settings # NVIDIA driver configuration GUI (shared)
        - lib32-nvidia-580xx-utils # 32-bit NVIDIA utilities (gaming)
        - libva-nvidia-driver # VA-API support for NVIDIA (hardware video decode)

    system_utilities:
      enabled: true
      description: "Core system utilities"
      conflicts: []
      post_install_hook: ""
      packages:
        - xdg-utils # Desktop integration utilities
        - xdg-desktop-portal # Desktop portal framework (file picker, OAuth)
        - xdg-desktop-portal-kde # KDE portal backend (better Electron/Flatpak compatibility)
        - nano # Simple terminal text editor
        - vim # Fallback/recovery text editor
        - sudo # Essential system package
        - gptfdisk # Disk partitioning tool
        - systemd-ukify # Unified kernel image generation
        - smartmontools # SMART disk health monitoring
        - btrfs-progs # Btrfs filesystem utilities
        - timeshift # System backup and restore (Btrfs snapshots)
        - timeshift-systemd-timer # Systemd timer for Timeshift scheduling (AUR)
        - restic # Incremental encrypted backup tool (home directory)
        - poppler # PDF rendering utilities (used by GUI apps)
        - ventoy-bin
        # Desktop integration libraries
        - gnome-keyring # Credential storage service (WiFi passwords)
        - gvfs # Virtual filesystem (SMB/FTP support)
        - tumbler # Thumbnail generation service
        - kdegraphics-thumbnailers # KDE thumbnail generators
        # Qt/KDE libraries
        - qt5-wayland # Qt5 Wayland support
        - qt6-wayland # Qt6 Wayland support
        - breeze # KDE Breeze widget theme

    network:
      enabled: true
      description: "Network connectivity and tools"
      conflicts: []
      post_install_hook: ""
      packages:
        - iwd # Modern WiFi daemon
        - wpa_supplicant # WiFi authentication daemon
        - tailscale # Mesh VPN service
        - networkmanager # Network configuration daemon
        - bluez # Bluetooth protocol stack
        - bluez-utils # Bluetooth command-line utilities
        - openssh # SSH client and server
        - wget # Non-interactive network downloader

    package_management:
      enabled: true
      description: "Package managers and repositories"
      conflicts: []
      post_install_hook: ""
      packages:
        - flatpak # Universal package manager
        - paru # AUR helper (Rust, faster than yay)
        - pacman-contrib # Contributed pacman scripts
        - rate-mirrors # Mirror ranking utility
        - chaotic-keyring # Chaotic-AUR repository keys
        - chaotic-mirrorlist # Chaotic-AUR mirror list
        - chezmoi_modify_manager # Complementary package for chezmoi
        - topgrade # Universal system upgrade tool

    # ============================================================
    # SHELL & TERMINAL
    # ============================================================

    shell_environment:
      enabled: true
      description: "Shell and terminal emulator"
      conflicts: []
      post_install_hook: ""
      packages:
        - ghostty # Modern GPU terminal
        - kitty # Baseline terminal emulator
        - starship # Fast customizable shell prompt
        - zsh # POSIX shell with advanced features
        - zsh-antidote # Fast zsh plugin manager
        - zoxide # Smarter cd with frecency algorithm

    terminal_tools:
      enabled: true
      description: "Essential CLI utilities"
      conflicts: []
      post_install_hook: ""
      packages:
        # Core CLI utilities
        - fd # Fast find with sane defaults
        - ripgrep # Fastest regex search tool
        - bat # Cat with syntax highlighting
        - eza # Modern ls with git integration
        - xh # User-friendly curl alternative
        - jaq # Fast jq alternative in Rust
        - jq # JSON processor (compatibility)
        - go-yq # YAML processor (jq for YAML)
        - rsync # Incremental file transfer
        - tlrc # Community-driven simplified manpages
        - fzf # Fuzzy finder for CLI
        # System monitoring & diagnostics
        - fastfetch # Fast neofetch alternative
        - htop # Classic process monitor
        - nvitop # htop-like GPU monitor (NVIDIA)
        - btop # Modern resource monitor
        - dust # Disk usage with tree visualization
        - inxi # Comprehensive system info tool
        - lm_sensors # Hardware sensor monitoring
        # Shell utilities
        - usage # Cheat sheet for CLI commands
        - vhs # Record terminal sessions as GIFs
        - gum # Glamorous shell UI toolkit
        - rbw # Unofficial Bitwarden CLI
        - spicetify-cli # Spotify theme CLI
        # File management & navigation
        - broot # Tree navigator for large directories
        - yazi # Blazing fast TUI file manager
        - unarchiver # Universal archive extractor (unar, lsar)
        # Image & document processing
        - imagemagick # Image manipulation toolkit
        # Desktop integration CLIs
        - kde-cli-tools # KDE integration tools (kioclient)

    fonts:
      enabled: true
      description: "Font packages"
      conflicts: []
      post_install_hook: ""
      packages:
        # Terminal fonts
        - ttf-firacode-nerd # Monospace font with ligatures
        - otf-opendyslexic-nerd # Dyslexia-friendly font
        - otf-geist-mono-nerd # Vercel's monospace font
        - ttf-iosevka-nerd # Programming font with ligatures
        - ttf-fira-sans # Sans-serif system font
        # Unicode & international coverage
        - noto-fonts # Google Noto (Latin/Greek/Cyrillic)
        - noto-fonts-cjk # Chinese, Japanese, Korean
        - noto-fonts-emoji # Color emoji
        - noto-fonts-extra # Extended Unicode scripts
        - ttf-liberation # Microsoft font replacements

    # ============================================================
    # DEVELOPMENT
    # ============================================================

    development_core:
      enabled: true
      description: "Core development tools"
      conflicts: []
      post_install_hook: ""
      packages:
        - neovim # Modal text editor with LSP support
        - git # Distributed version control
        - mise # Polyglot runtime manager (asdf alternative)
        - docker # Container runtime platform
        - docker-buildx # Docker extended build capabilities
        - docker-compose # Docker Compose plugin
        - go # Go programming language
        - python # Python runtime
        - rust # Rust compiler and cargo

    development_clis:
      enabled: true
      description: "Development CLI tools"
      conflicts: []
      post_install_hook: ""
      packages:
        # Build tooling
        - cmake # hyprpm dependency
        - meson # hyprpm dependency
        - cpio # hyprpm dependency
        # Development CLIs
        - aws-cli-v2 # AWS command line interface
        - git-delta # Syntax-highlighting git diff pager
        - mergiraf # 3-way merge tool with better conflicts
        - jujutsu # Git-compatible VCS (experimental)
        - lazygit # Terminal UI for git commands
        - lazydocker # Terminal UI for docker management
        - posting # Modern API client (Postman alternative)

    ai_tools:
      enabled: true
      description: "AI and machine learning tools"
      conflicts: []
      post_install_hook: ""
      packages:
        - ollama # Local LLM runtime

    # ============================================================
    # DESKTOP ENVIRONMENT
    # ============================================================

    desktop_hyprland:
      enabled: true
      description: "Hyprland Wayland compositor"
      conflicts: []
      post_install_hook: ""
      packages:
        - hyprland # Hyprland Wayland compositor
        - uwsm # Universal Wayland Session Manager
        - xdg-desktop-portal-hyprland # Portal integration for Hyprland
        - waybar # Status bar for Wayland
        - hyprlock # Official Hyprland screen locker
        - hypridle # Official Hyprland idle daemon
        - polkit-gnome # Polkit authentication agent (hyprpolkitagent crashes)
        - polkit-kde-agent # KDE PolicyKit agent (alternative)
        - network-manager-applet # Network Manager GUI applet
        - darkman # Solar-based light/dark mode automation
        - hyprsunset # Blue light filter (gamma adjustment)
        - swww # Dynamic wallpaper daemon with transitions
        - wallust-git # Color palette generator from wallpapers (chaotic-aur)
        - cliphist # Clipboard history manager
        - wofi # Application launcher
        - wlogout # Logout/shutdown menu
        - wl-clipboard # Wayland clipboard CLI utilities
        - pamixer # PulseAudio/PipeWire mixer CLI
        - brightnessctl # Screen brightness controller
        - playerctl # MPRIS media player controller
        - blueman # GTK Bluetooth manager GUI
        - dunst # Notification daemon
        - grim # Wayland screenshot utility
        - slurp # Select screen region for screenshots
        - satty # Screenshot annotation tool
        - wayfreeze-git # Freeze screen for clean recording
        - gpu-screen-recorder-git # Hardware-accelerated screen recording (chaotic-aur)
        - swayosd # OSD overlay for volume/brightness
        - xkeyboard-config # Keyboard layout definitions
        - hyprpicker # Wayland color picker
        - plymouth # Graphical boot splash screen
        - sddm # Simple Desktop Display Manager
        - solarized-sddm-theme # Solarized theme for SDDM
        - xorg-server # X server for XWayland compatibility
        - hyprdynamicmonitors-bin # Power-aware monitor manager with TUI
        - hyprwhenthen-bin # Event-driven window automation
        - hyprdrover # Rust-based session management for Hyprland

    desktop_gui_apps:
      enabled: true
      description: "GUI applications"
      conflicts: []
      post_install_hook: ""
      packages:
        # Web browsers
        - firefox # Privacy-focused web browser
        - chromium # Open-source Chrome base
        # Development
        - code # Visual Studio Code editor
        # Backup
        - nextcloud-client # Nextcloud desktop sync client
        # File management (GUI)
        - thunar # Lightweight GTK file manager
        - dolphin # KDE file manager (alternative)
        - thunar-archive-plugin # Archive right-click integration
        - file-roller # Archive manager GUI
        # Qt configuration
        - qt5ct # Qt5 configuration tool
        # Utilities
        - impression # USB image writer tool
        - localsend # Local network file sharing (AirDrop alternative)
        - imv # Lightweight image viewer for Wayland
        # Various
        - flatpak:com.spotify.Client # Music streaming (Flatpak)
        - flatpak:com.slack.Slack # Team communication (Flatpak)
        - flatpak:com.github.xournalpp.xournalpp # PDF annotation (Flatpak)
        - flatpak:org.qbittorrent.qBittorrent # BitTorrent client (Flatpak)

    audio_system:
      enabled: true
      description: "Audio system (PipeWire)"
      conflicts: []
      post_install_hook: ""
      packages:
        - pipewire # Modern audio/video server
        - pipewire-alsa # ALSA compatibility layer
        - pipewire-jack # JACK pro-audio compatibility
        - pipewire-pulse # PulseAudio replacement
        - gst-plugin-pipewire # GStreamer integration
        - libpulse # PulseAudio client libraries
        - wireplumber # PipeWire session manager
        - sof-firmware # Intel audio DSP firmware

    printing_scanning:
      enabled: true
      description: "Printing and scanning support"
      conflicts: []
      post_install_hook: ""
      packages:
        - cups # UNIX printing system
        - cups-pdf # PDF virtual printer
        - cups-pk-helper # CUPS PolicyKit integration
        - system-config-printer # Printer setup GUI
        - sane # Scanner access library
        - sane-airscan # eSCL/AirScan scanner driver
        - samsung-unified-driver-common # Samsung driver base
        - samsung-unified-driver-printer # Samsung printer driver
        - samsung-unified-driver-scanner # Samsung scanner driver
        - skanpage # Simple scanning application

  # Packages to remove (explicit cleanup)
  # Note: NVIDIA driver cleanup handled dynamically by sync script based on GPU detection
  delete:
    - yay # Replaced by paru
    - kitty-shell-integration
    - kitty-terminfo
