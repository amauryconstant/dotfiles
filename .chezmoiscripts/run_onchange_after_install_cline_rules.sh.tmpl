#!/bin/sh

# Script: run_onchange_after_install_cline_rules.sh.tmpl
# Purpose: Copy Cline rule files from dot_ai/rules/cline to $HOME/Documents/Cline/Rules
# Requirements: Arch Linux
# Hash: {{ output "find" "dot_ai/rules/cline" "-type" "f" "-exec" "sha256sum" "{}" ";" | sha256sum }}

{{ if eq .osId "linux-arch" }}
    echo "Installing Cline rules..."
    
    # Create target directory if it doesn't exist
    mkdir -p "$HOME/Documents/Cline/Rules"
    
    # Copy all files from dot_ai/rules/cline to $HOME/Documents/Cline/Rules
    echo "Copying Cline rule files to $HOME/Documents/Cline/Rules..."
    cp -f {{ .chezmoi.sourceDir }}/dot_ai/rules/cline/* "$HOME/Documents/Cline/Rules/"
    
    # Set appropriate permissions
    chmod 644 "$HOME/Documents/Cline/Rules/"*
    
    echo "âœ“ Cline rules installed successfully"
{{ else }}
    echo "ERROR: This script is only supported on Arch Linux systems"
    echo "Required: osId 'linux-arch'"
    echo "Detected: '{{ .osId }}'"
    echo "Script: $(basename "$0")"
    exit 1
{{ end }}
